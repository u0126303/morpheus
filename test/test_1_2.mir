# RUN: ../llvm/build/bin/llc -mtriple=riscv32 --run-pass=greedy,virtregrewriter %s -o - | ../llvm/build/bin/FileCheck %s -check-prefix=ON
# RUN: ../llvm/build/bin/llc -mtriple=riscv32 --run-pass=greedy,virtregrewriter --ami-disable-add-segment %s -o - | ../llvm/build/bin/FileCheck %s -check-prefix=OFF
---
name: test_1_2
tracksRegLiveness: true
noPhis: true
isSSA: false
liveins:
  - { reg: '$x10', virtual-reg: '%0' }
  - { reg: '$x11', virtual-reg: '%1' }
body: |
  bb.0:
    successors: %bb.1, %bb.2
    liveins: $x10, $x11

    %0:gpr = COPY $x10
    %1:gpr = COPY $x11
    BGE %0, %1, %bb.2
  
    ; ON:  bb.1:
    ; OFF: bb.1:
  bb.1:
    successors: %bb.3

    %2:gpr = persistent ADDI %0, 0
    %3:gpr = ADDI %1, 0
    ; ON:       $x12 =
    ; OFF:      $x10 =
    ; ON-NEXT:  $x11 =
    ; OFF-NEXT: $x11 =
    PseudoBR %bb.3
  
    ; ON:  bb.2:
    ; OFF: bb.2:
  bb.2:
    successors: %bb.3

    %4:gpr = ADDI %0, 0
    ; ON : $x10 =
    ; OFF: $x10 =
  
    ; ON:  bb.3:
    ; OFF: bb.3:
  bb.3:
    $x10 = ADDI $x0, 0
    PseudoRET implicit $x10
...
