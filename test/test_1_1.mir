# RUN: ../llvm/build/bin/llc -mtriple=riscv32 --run-pass=greedy,virtregrewriter %s -o - | ../llvm/build/bin/FileCheck %s
# RUN: ../llvm/build/bin/llc -mtriple=riscv32 --run-pass=greedy,virtregrewriter --ami-disable-add-segment %s -o - | ../llvm/build/bin/FileCheck %s
---
name: test_1_2
tracksRegLiveness: true
noPhis: true
isSSA: false
liveins:
  - { reg: '$x10', virtual-reg: '%0' }
  - { reg: '$x11', virtual-reg: '%1' }
body: |
  bb.0:
    successors: %bb.1, %bb.2
    liveins: $x10, $x11

    %0:gpr = COPY $x10
    %1:gpr = COPY $x11
    BGE %0, %1, %bb.2
  
    ; CHECK: bb.1:
  bb.1:
    successors: %bb.3

    %2:gpr = persistent ADDI %0, 0
    ; CHECK: $x10 =
    PseudoBR %bb.3
  
    ; CHECK: bb.2:
  bb.2:
    successors: %bb.3

    %2:gpr = ADDI $x0, 0
    ; CHECK: $x10 =
  
    ; CHECK: bb.3:
  bb.3:
    $x10 = ADDI %2, 0
    ; CHECK: $x10 =
    PseudoRET implicit $x10
...
